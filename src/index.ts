import { Err } from "./lib.js";
import { interpret } from "./wenyan/vm.js";

const script = `有咒曰Object.create(null)云云或曰logger其alert者window之alert也夫logger聞log而答曰請console君debug之有text云云聞notify而答曰或曰text吾當log之有文曰[文言lang-測試]云云有text請+之請window君alert之云云有document之body内有div曰container内有無名div其padding曰10px云云display曰flow-root云云background-color曰pink云云font-weight曰bold云云内有無名label其textContent曰重複次數云云有input曰count-input其display曰block云云有button曰mButton其textContent曰RANDOMIZE云云有無名label其textContent曰輸入云云有input曰original-input其display曰block云云夫container内有pre曰display其background-color曰lightgray云云padding曰20px云云white-space曰normal云云word-break曰break-all云云夫mButton其display曰block云云margin曰10px云云聞click而答曰有__INITIALIZED__不然曰吾當init云云然後曰吾當randomize之云云云云聞randomize而答曰有咒曰Math.random()云云有count請*之請Math君floor之real-count當如是有文曰當前重複次數為云云有real-count請+之document之title當如是有count有文曰x隨機數(0-1)\u0020=\u0020云云有real-count請+之請+之請logger君notify之有real-count也original-input之value當repeat之display之textContent當如是云云聞init而答曰有文曰應用初始化云云請window君confirm之然後曰有count-input之value也請parseInt之count當如是有咒曰isNaN(count)云云然後曰有0也count當如是云云有咒曰true云云__INITIALIZED__當如是夫count-input其randomize者吾之randomize也聞blur而答曰吾當randomize之有real-count請original-input之value君repeat之display之textContent當如是云云聞input而答曰有吾之value也請parseInt之count當如是有咒曰isNaN(count)云云然後曰有0也吾之value當如是count當如是云云云云夫original-input其background-color曰#ffaaaa云云其color曰white云云聞input而答曰有real-count也吾之value當repeat之display之textContent當如是云云云云云云夫document之body聞click而答曰有__INITIALIZED__不然曰有文曰請輸入您的姓名云云請window君prompt之或曰name有文曰您好云云有name請+之請window君alert之云云云云`;

console.log(interpret(script));
console.log(Err.last);
